{{ block styles }}
<style>
    input[type=number] {
        width: 80px;
        text-align: center;
    }
</style>
{{ endblock }}

{{ block title }}
Questionnaire 2
{{ endblock }}

{{ block content }}

<div class="form-control mb-1">
    {{ formfield "climate_knowledge" }}
</div>
<div class="form-control mb-3">
    <p>
        For the next question, we would like you to rank the items according to the greenhouse gas emissions they emit,
        to the best of your knowledge (where 1 is the item that emits the most and 3 is the item that emits the least).
        The greenhouse gas emissions of a product are those emitted at all steps involved in its production and
        distribution.
    </p>
    {{ formfield "rank_coal" }} {{ formfield "rank_gas" }} {{ formfield "rank_nuclear" }}
</div>

{{ next_button }}

<p class="form-control-errors" style="display: none;">
    Please ensure that all ranks are unique.
</p>
{{ endblock }}

{{ block scripts }}
<script src="{{ static 'fill_auto.js' }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector(".otree-btn-next").addEventListener("click", (e) => {
            if (!ckeck_ranks()) {
                e.preventDefault();
            }
        })
        if (js_vars.fill_auto)
            fill_auto();
    });

    function ckeck_ranks() {
        const coal = parseInt(forminputs.rank_coal.value);
        const gas = parseInt(forminputs.rank_gas.value);
        const nuclear = parseInt(forminputs.rank_nuclear.value);

        if (coal === gas || coal === nuclear || gas === nuclear) {
            document.querySelector(".form-control-errors").style.display = "block";
            setTimeout(() => {document.querySelector(".form-control-errors").style.display = "none";}, 3000)
            return false;
        }
        return true;
    }
</script>
{{ endblock }}