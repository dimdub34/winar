{{ block styles }}
<style>
    input[type=number] {
        width: 80px;
        text-align: center;
    }
</style>
{{ endblock }}

{{ block title }}
{{ if en }}

{{ elif fr }}

{{ endif }}
{{ endblock }}

{{ block content }}
<div class="card bg-light mb-3">
    <div class="card-body">
        {{ formfield "climate_knowledge" }}
    </div>
</div>

<div class="card bg-light mb-3">
    <div class="card-body">
    {{ if en }}
    <p>
        For the next question, we would like you to rank the items according to the greenhouse gas emissions they emit,
        to the best of your knowledge (where 1 is the item that emits the most and 3 is the item that emits the least).
        The greenhouse gas emissions of a product are those emitted at all steps involved in its production and
        distribution.
    </p>
    {{ elif fr }}
    <p>
        Pour la question suivante, nous vous demandons de classer les éléments selon les émissions de gaz à effet de
        serre qu'ils émettent, au mieux de vos connaissances (où 1 est l'élément qui émet le plus et 3 est l'élément qui
        émet le moins). Les émissions de gaz à effet de serre d'un produit sont celles émises à toutes les étapes
        impliquées dans sa production et sa distribution.
    </p>
    {{ endif }}
    {{ formfield "rank_coal" }} {{ formfield "rank_gas" }} {{ formfield "rank_nuclear" }}
    </div>
</div>

{{ next_button }}

<p class="form-control-errors" style="display: none;">
    {{ if en }}
    Please ensure that all ranks are unique.
    {{ elif fr }}
    Veuillez vous assurer que tous les rangs sont uniques.
    {{ endif }}
</p>
{{ endblock }}

{{ block scripts }}
<script src="{{ static 'fill_auto.js' }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector(".otree-btn-next").addEventListener("click", (e) => {
            if (!ckeck_ranks()) {
                e.preventDefault();
            }
        })
        if (js_vars.fill_auto)
            fill_auto();
    });

    function ckeck_ranks() {
        const coal = parseInt(forminputs.rank_coal.value);
        const gas = parseInt(forminputs.rank_gas.value);
        const nuclear = parseInt(forminputs.rank_nuclear.value);

        if (coal === gas || coal === nuclear || gas === nuclear) {
            document.querySelector(".form-control-errors").style.display = "block";
            setTimeout(() => {document.querySelector(".form-control-errors").style.display = "none";}, 2000)
            return false;
        }
        return true;
    }
</script>
{{ endblock }}